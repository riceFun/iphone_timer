# 快速开始指南

## 构建和安装应用

### 1. 检查Flutter环境

```bash
flutter doctor
```

确保Android相关配置正常。

### 2. 安装依赖（已完成）

```bash
flutter pub get
```

### 3. 连接Android设备或启动模拟器

连接真机:
- 启用开发者模式
- 启用USB调试
- 连接USB线

或启动Android模拟器:
```bash
flutter emulators --launch <emulator_id>
```

### 4. 运行应用

```bash
flutter run
```

### 5. 构建发布版APK

```bash
flutter build apk --release
```

APK文件位置: `build/app/outputs/flutter-apk/app-release.apk`

## 使用步骤

### 第一步: 启动倒计时

1. 打开应用后,点击屏幕下方的绿色"开始"按钮
2. 会弹出一个iOS风格的时间选择器
3. 左侧滚动选择"分钟",右侧滚动选择"秒钟"
4. 点击右上角"开始"按钮启动倒计时

### 第二步: 控制倒计时

- **暂停**: 点击橙色"暂停"按钮
- **继续**: 暂停后点击绿色"继续"按钮
- **停止**: 点击红色"停止"按钮完全停止并重置

### 第三步: 添加快捷磁贴

1. 在Android设备上,从屏幕顶部下拉打开通知栏
2. 再次下拉展开完整的快捷设置面板
3. 点击底部的"编辑"按钮(铅笔图标)
4. 找到"倒计时"磁贴
5. 长按并拖动到上方的快捷设置区域
6. 点击返回保存

现在你可以:
- 从任何界面下拉通知栏
- 点击"倒计时"磁贴
- 快速打开倒计时应用

### 第四步: 体验通知功能

当倒计时运行时:
1. 按Home键或切换到其他应用
2. 通知栏会持续显示倒计时进度
3. 倒计时结束时会:
   - 播放提示音(如果添加了音频文件)
   - 手机振动提醒
   - 显示"倒计时结束"通知

## 添加自定义提示音(可选)

1. 准备一个MP3格式的音频文件
2. 重命名为 `timer_complete.mp3`
3. 放入 `assets/sounds/` 目录
4. 重新构建应用

推荐音频特性:
- 时长: 2-5秒
- 格式: MP3或AAC
- 音量: 适中,不要太大

## 常见问题

### Q: 通知不显示?

A: 在Android设置中:
1. 进入应用设置
2. 找到"iphone_timer"
3. 允许所有通知权限

### Q: 找不到快捷磁贴?

A:
- 确保使用Android 7.0或更高版本
- 重启应用后再次查找
- 在快捷设置编辑界面向下滚动查找

### Q: 倒计时不准确?

A:
- 检查省电模式是否开启
- 关闭电池优化限制
- 允许应用后台运行

### Q: 没有声音?

A:
- 检查是否添加了音频文件
- 确保手机未静音
- 检查应用音量权限

## 技术说明

### 权限说明

应用需要以下权限:

| 权限 | 用途 |
|-----|------|
| VIBRATE | 倒计时结束时振动提醒 |
| WAKE_LOCK | 保持倒计时运行 |
| POST_NOTIFICATIONS | Android 13+通知权限 |
| FOREGROUND_SERVICE | 后台运行倒计时 |

### 兼容性

- 最低Android版本: Android 7.0 (API 24)
- 推荐Android版本: Android 10+
- Quick Settings Tile: Android 7.0+
- 通知运行时权限: Android 13+

### 性能优化

- 使用高效的Timer实现
- 通知更新频率优化
- 内存占用小
- 电池消耗低

## 下一步

你可以:
1. 自定义UI颜色和样式 (`lib/screens/timer_screen.dart`)
2. 添加预设时间快捷按钮
3. 实现多个倒计时功能
4. 添加历史记录功能
5. 创建桌面小部件

查看 `README.md` 了解更多开发信息。
